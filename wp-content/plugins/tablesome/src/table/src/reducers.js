let self;class ReducersClass{constructor(e){self=this,self.hooks=e}getViewableRecords(e,t){return this.getPaginatedRecords(e,t.pagination)}getSfsRecords(e,t){let r=e;return r=this.getFilteredRecords(r,t.filters),r=this.getSearchedRecords(r,t.search,t.columns),r=this.getSortedRecords(r,t.sort),r}getPaginatedRecords(e,t){const r=t.currentPage*t.numOfRecordsPerPage,o=parseInt(r)+parseInt(t.numOfRecordsPerPage);return e.slice(r,o)}getTableSortRecords(e,t){return"read-only"!==t.mode||e.sort(((e,r)=>{let o=e[t.sortingBy],n=r[t.sortingBy],s="asc"===t.sortingOrder,l="created_at"===t.sortingBy||"updated_at"===t.sortingBy,c="custom"==t.sortingBy;return l?(o=new Date(o).getTime(),n=new Date(n).getTime(),s?o-n:n-o):c?s?o.localeCompare(n):n.localeCompare(o):void 0})),e}getFilteredRecords(e,t){let r=e;return t.forEach(((e,t)=>{e.column_id=e.filter_column_id,r=self.getFilteredRecordsFromSingleFilter(r,e)})),r}getSearchedRecords(e,t,r){return null==t||0==t.length?e:(t=t.toLowerCase(),e.filter((function(e){let o=!1;for(let n=0;n<e.content.length;n++){const s=e.content[n];let l=s.value,c=!1;const a=r[n].format;let i={isContentMatch:c,searchQuery:t,cell:s,cellType:a,column:r[n]};i=self.hooks.applyFilters("getSearchRecords",i),c=i.isContentMatch,"file"==a?c=parseInt(t)==parseInt(l)||c:c||(l="string"==typeof l?l.toLowerCase():"",c=l.toLowerCase().indexOf(t)>=0||c),c&&(o=!0)}return o})))}getSortedRecords(e,t){const r=t.order;return null==r||e.sort(((e,o)=>{let n={valueA:"",valueB:"",rowA:e.content[t.index],rowB:o.content[t.index],cellType:t.column.format,sortType:"text"};n=self.hooks.applyFilters("getSortRecords",n);let s=n.valueA,l=n.valueB;return s===l?0:0==s.length?1:0==l.length?-1:"desc"==r?"number"==n.sortType?l-s:s<l?1:-1:"number"==n.sortType?s-l:s<l?-1:1})),e}getFilteredRecordsFromSingleFilter(e,t){return e.filter((function(e){let r=e.content[t.column_index].value;t.value;"textarea"==t.format&&(r=e.content[t.column_index].html,r=r.replace(/<[^>]+>/g,""));const o=null===r||""==r;if("empty"===t.operator.value)return o;if("not_empty"===t.operator.value)return!o;let n=!1,s={isContentMatch:n,filter:t,cell:e.content[t.column_index]};return s=self.hooks.applyFilters("getFilterRecords",s),n=s.isContentMatch,n}))}filterText(e,t,r){return t=t.toLowerCase(),r=r.toLowerCase(),"is"==e?t==r:"is_not"==e?t!=r:"contains"==e?t.includes(r):"does_not_contain"==e?!t.includes(r):"starts_with"==e?t.startsWith(r):"ends_with"==e?t.endsWith(r):"empty"==e||"not_empty"==e?t<=r:void 0}filterNumber(e,t,r){return"="==e?t==r:"!="==e?t!=r:">"==e?t>r:"<"==e?t<r:">="==e?t>=r:"<="==e?t<=r:void 0}}export default ReducersClass;